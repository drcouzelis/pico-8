pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
-- mechanical tank
-- by david couzelis

-- player
plx=8*7
ply=8*7
plfrm=false
-- crosshairs
crossfrm=false
crosscnt=0
--player bullet
bltshot=false
bltx=0
blty=0

function _init()
 palt(0,false)
 palt(11,true)
end

function _update()
 -- move left
 if btn(0) then
  plx-=1
 end
 -- move right
 if btn(1) then
  plx+=1
 end
 -- move up
 if btn(2) then
  ply-=1
 end
 -- move down
 if btn(3) then
  ply+=1
 end
 -- update player frame
 if btn(0) or btn(1) then
  plfrm=not plfrm
 end
 -- update the crosshairs
 crosscnt+=1
 if crosscnt>6 then
  -- to enable crasshair flash
  --crossfrm=not crossfrm
  crosscnt=0
 end
 -- bound the player
 if plx<0 then
  plx=0
 end
 if plx>128-16 then
  plx=128-16
 end
 if ply<0 then
  ply=0
 end
 if ply>(8*14)-8 then
  ply=(8*14)-8
 end
 -- player bullet
 if btn(4) or btn(5) and
    not bltshot then
  bltshot=true
  bltx=plx+5
  blty=(8*14)-6
  blttgty=ply
 end
 if bltshot then
  blty-=2
  if blty<=blttgty then
   bltshot=false
  end
 end
end

function _draw()
 cls(7)
 -- draw map
 map(0,0,0,0)
 -- draw tank
 if plfrm then
  spr(1,plx,8*14)
  spr(2,plx+8,8*14)
 else
  spr(3,plx,8*14)
  spr(4,plx+8,8*14)
 end
 -- draw player bullet
 if bltshot then
  spr(17,bltx,blty)
 end
 -- draw crosshairs
 if crossfrm then
  spr(5,plx+5,ply)
 else
  spr(6,plx+5,ply)
 end
end
__gfx__
00000000b00000056000000bb00000056000000bbb777bbbbb000bbb777777777777777777777777666666666666666600000000000000000000000000000000
0000000005656505606565600656560560565650bb707bbbbb070bbb777777777777777777777777777777776666666600000000000000000000000000000000
00700700b00000577600000bb00000577600000b7770777b0007000b777777777777777766666666666666666666666600000000000000000000000000000000
00077000b05660577606660bb05660577606660b7000007b0777770b777777777777777777777777777777776666666600000000000000000000000000000000
00077000b05660555506660bb05660555506660b7770777b0007000b777777777777777777777777666666666666666600000000000000000000000000000000
00700700b00000000000000bb00000000000000bbb707bbbbb070bbb777777777777777777777777777777776666666600000000000000000000000000000000
0000000005656565656565600656565656565650bb777bbbbb000bbb777777776666666666666666666666666666666600000000000000000000000000000000
00000000b00000000000000bb00000000000000bbbbbbbbbbbbbbbbb777777777777777777777777777777776666666600000000000000000000000000000000
00000000b0000bbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007700bbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077770bbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077770bbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007700bbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000b0000bbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b0b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a0a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0909090909090909090909090909090900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0808080808080808080808080808080800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
