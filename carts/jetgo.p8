pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- jet go
-- by david couzelis

actors={}

function make_actor(k,x,y)
 local a={
  k=k,  -- sprite num
  kw=1, -- sprite width
  kh=1, -- sprite height
  x=x,
  y=y,
  dx=0, -- x vel
  dy=0, -- y vel
  w=7,  -- physical size
  h=7,
  fh=false, -- flip h?
  fv=false, -- flip v?
  vis=true, -- visible?
  update=function(a)
   a.x+=a.dx
   a.y+=a.dy
  end,
  draw=function(a)
   spr(a.k,a.x,a.y,a.kw,a.kh,a.fh,a.fv)
  end
 }
 add(actors,a)
 return a
end

terr_l={}
terr_r={}
terr_last_l=20
terr_last_r=0
terr_var=4
terr_min=10
terr_max=30

function make_terrain()
 -- left
 terr_l={}
 local x=terr_last_l
 for i=0,64 do
  x+=(rnd(2)-1)*rnd(terr_var)
  x=min(x,terr_max)
  x=max(x,terr_min)
  local t={
   x=x,
   y=i
  }
  add(terr_l,t)
 end
 
 -- right
 terr_r={}
 local x=terr_last_r
 for i=0,64 do
  x+=(rnd(2)-1)*rnd(terr_var)
  x=min(x,terr_max)
  x=max(x,terr_min)
  local t={
   x=x,
   y=i
  }
  add(terr_r,t)
 end
end

function draw_terrain()
 for t in all(terr_l) do
  rectfill(0,t.y*2,t.x,(t.y*2)+2,4)
 end
 for t in all(terr_r) do
  rectfill(128,t.y*2,128-t.x,(t.y*2)+2,4)
 end
end

function _init()
 palt(0,false)
 palt(11,true)
 
 -- create the terrain
 make_terrain()
 
 -- create the player
 pl=make_actor(1,56,90)
 pl.w=16
 pl.h=16
 pl.kw=2
 pl.kh=2
end

function control_player()
 if btn(0) then
  pl.dx=-1.5
 end
 if btn(1) then
  pl.dx=1.5
 end
 if not btn(0) and not btn(1) then
  pl.dx=0
 end
 if btn(2) then
  pl.dy=-1.5
 end
 if btn(3) then
  pl.dy=1.5
 end
 if not btn(2) and not btn(3) then
  pl.dy=0
 end
end

function bound_player()
 if pl.x<0 then pl.x=0 end
 if pl.x+pl.w>128 then pl.x=128-pl.w end
 if pl.y<0 then pl.y=0 end
 if pl.y+pl.h>128 then pl.y=128-pl.h end
end

function _update()
 control_player()
 bound_player()
 for a in all(actors) do
  a:update()
 end
end

function _draw()
 cls(12)
 draw_terrain()
 for a in all(actors) do
  a:draw()
 end
end
__gfx__
00000000bbbbbbb55bbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbb55bbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700bbbbbbb55bbbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000bbbbbb5665bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000bbbbbb5665bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700bbbbbb5665bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbb6b555555b6bbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbb6555555556bbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000b6b5555555555b6b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000b65555655655556b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000b55555655655555b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000550506655660505500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bb0b0b0550b0b0bb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbb505505bbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbb50055005bbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbb5505bb5055bbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
